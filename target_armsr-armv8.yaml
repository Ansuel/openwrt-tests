targets:
  main:
    resources:
      - NetworkService:
          # The actual address will be filled in by the strategy
          address: ''
          port: 22
          username: root

    drivers:
      - QEMUDriver:
          qemu_bin: qemu_bin
          machine: virt
          cpu: cortex-a57
          memory: 128M
          kernel: kernel
          extra_args: "-nographic -nic user,model=virtio-net-pci"
          nic: user,model=virtio-net-pci
      - ShellDriver:
          console_ready: Please press Enter to activate this console.
          prompt: 'root@[\w()]+:[^ ]+ '
          login_prompt: built-in shell (ash)
          await_login_timeout: 15
          username: root
      - SSHDriver: {}
      - QEMUNetworkStrategy: {}

tools:
  qemu_bin: !template '$LG_QEMU_BIN'

images:
  kernel: openwrt-armsr-armv8-generic-initramfs-kernel.bin

imports:
  - qemunetworkstrategy.py
